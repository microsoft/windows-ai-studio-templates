{
    "addAmdNpu": {
        "inferenceSettings": {
            "execution_provider": "VitisAIExecutionProvider",
            "provider_options": [
                {
                    "target": "RyzenAI_intel_bert",
                    "cache_dir": "C:\\temp",
                    "dd_write_debug_files": "true",
                    "log_level": "info"
                }
            ]
        }
    },
    "runtime": {
        "name": "Evaluate on",
        "type": "enum",
        "displayNames": [
            "Qualcomm NPU",
            "AMD NPU",
            "CPU"
        ],
        "path": "systems.local_system.accelerators.0.execution_providers.0",
        "values": [
            "QNNExecutionProvider",
            "VitisAIExecutionProvider",
            "CPUExecutionProvider"
        ],
        "actions": [
            [],
            [
                {
                    "type": "insert",
                    "path": "evaluators.common_evaluator.metrics[0].user_config",
                    "value": {
                        "inference_settings": {
                            "onnx": {
                                "execution_provider": "VitisAIExecutionProvider",
                                "provider_options": [
                                    {
                                        "target": "RyzenAI_intel_bert",
                                        "cache_dir": "C:\\temp",
                                        "dd_write_debug_files": "true",
                                        "log_level": "info"
                                    }
                                ]
                            }
                        }
                    }
                },
                {
                    "type": "insert",
                    "path": "evaluators.common_evaluator.metrics[1].user_config",
                    "value": {
                        "inference_settings": {
                            "onnx": {
                                "execution_provider": "VitisAIExecutionProvider",
                                "provider_options": [
                                    {
                                        "target": "RyzenAI_intel_bert",
                                        "cache_dir": "C:\\temp",
                                        "dd_write_debug_files": "true",
                                        "log_level": "info"
                                    }
                                ]
                            }
                        }
                    }
                }
            ],
            []
        ],
        "fixed": false
    },
    "sections": [
        {
            "name": "Convert",
            "phase": "Conversion",
            "parameters": [],
            "toggle": {
                "name": "Convert to ONNX format",
                "type": "bool",
                "path": "passes.conversion",
                "actions": [
                    [],
                    []
                ],
                "fixed": true
            }
        },
        {
            "name": "Quantize",
            "phase": "Quantization",
            "parameters": [
                {
                    "name": "Activation Type",
                    "tags": [
                        "ActivationType"
                    ],
                    "description": "Quantization data type of activation. ‘QInt8’ for signed 8-bit integer, ‘QUInt8’ for unsigned 8-bit integer etc.",
                    "descriptionLink": "https://onnxruntime.ai/docs/performance/model-optimizations/quantization.html",
                    "type": "enum",
                    "displayType": "RadioGroup",
                    "path": "passes.quantization.activation_type",
                    "values": [
                        "QInt8",
                        "QUInt8",
                        "QInt16",
                        "QUInt16"
                    ],
                    "template": {
                        "path": "passes.quantization.activation_type",
                        "template": "ActivationType"
                    }
                },
                {
                    "name": "Weight Type",
                    "tags": [
                        "WeightType"
                    ],
                    "description": "Data type for quantizing weights. ‘QInt8’ for signed 8-bit integer, ‘QUInt8’ for unsigned 8-bit integer etc.",
                    "descriptionLink": "https://onnxruntime.ai/docs/performance/model-optimizations/quantization.html",
                    "type": "enum",
                    "displayType": "RadioGroup",
                    "path": "passes.quantization.weight_type",
                    "values": [
                        "QInt8",
                        "QUInt8",
                        "QInt16",
                        "QUInt16"
                    ],
                    "template": {
                        "path": "passes.quantization.weight_type",
                        "template": "WeightType"
                    }
                },
                {
                    "name": "Quantization Dataset",
                    "tags": [
                        "QuantizationDataset"
                    ],
                    "type": "enum",
                    "path": "data_configs[0].load_dataset_config.data_name",
                    "values": [
                        "glue"
                    ],
                    "template": {
                        "path": "data_configs[0].load_dataset_config.data_name",
                        "values": [
                            "glue"
                        ],
                        "template": "QuantizationDataset"
                    }
                },
                {
                    "name": "Quantization Dataset Split",
                    "type": "enum",
                    "path": "data_configs[0].load_dataset_config.split",
                    "values": [
                        "train",
                        "validation",
                        "test"
                    ],
                    "template": {
                        "path": "data_configs[0].load_dataset_config.split",
                        "template": "QuantizationDatasetSplit"
                    }
                },
                {
                    "name": "Quantization Dataset Size",
                    "type": "int",
                    "path": "data_configs[0].pre_process_data_config.max_samples",
                    "template": {
                        "path": "data_configs[0].pre_process_data_config.max_samples",
                        "template": "QuantizationDatasetSize"
                    }
                }
            ],
            "toggle": {
                "name": "Quantize model",
                "type": "bool",
                "path": "passes.quantization",
                "actions": [
                    [],
                    [
                        {
                            "type": "update",
                            "path": "passes",
                            "value": {
                                "conversion": {
                                    "type": "OnnxConversion",
                                    "target_opset": 17,
                                    "save_as_external_data": true
                                }
                            }
                        }
                    ]
                ]
            }
        },
        {
            "name": "Evaluate",
            "phase": "Evaluation",
            "parameters": [
                {
                    "name": "Evaluation Dataset",
                    "tags": [
                        "EvaluationDataset"
                    ],
                    "type": "enum",
                    "path": "data_configs[1].load_dataset_config.data_name",
                    "values": [
                        "glue"
                    ],
                    "template": {
                        "path": "data_configs[1].load_dataset_config.data_name",
                        "values": [
                            "glue"
                        ],
                        "template": "EvaluationDataset"
                    }
                },
                {
                    "name": "Evaluation Dataset Split",
                    "type": "enum",
                    "path": "data_configs[1].load_dataset_config.split",
                    "values": [
                        "train",
                        "validation",
                        "test"
                    ],
                    "template": {
                        "path": "data_configs[1].load_dataset_config.split",
                        "template": "EvaluationDatasetSplit"
                    }
                },
                {
                    "name": "Evaluation Dataset Size",
                    "type": "int",
                    "path": "data_configs[1].pre_process_data_config.max_samples",
                    "template": {
                        "path": "data_configs[1].pre_process_data_config.max_samples",
                        "template": "EvaluationDatasetSize"
                    }
                }
            ],
            "toggle": {
                "name": "Evaluate model performance",
                "type": "bool",
                "path": "evaluator",
                "actions": [
                    [],
                    [
                        {
                            "type": "delete",
                            "path": "evaluator"
                        }
                    ]
                ]
            }
        }
    ]
}